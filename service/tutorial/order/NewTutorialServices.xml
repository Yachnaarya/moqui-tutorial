<?xml version="1.0" encoding="UTF-8"?>
<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-definition-2.1.xsd">

    <!--@1.Finding all Person records for all females-->
    <service verb="get" noun="FemalePersons">
        <out-parameters>
            <parameter name="personList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.party.Person" list="personList">
                <econdition field-name="gender" value="F"/>
            </entity-find>
        </actions>
    </service>

    <!-- @2.Listing  the Person details with MarsMarried marital status.-->

    <service verb="get" noun="Persons">
        <out-parameters>
            <parameter name="personList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.party.Person" list="personList">
                <econdition field-name="maritalStatusEnumId" value="MarsMarried"/>
            </entity-find>
        </actions>
    </service>

    <!-- @3.Finding all Order Header records so that the latest placed order appears at the top-->

    <service verb="get" noun="LatestOrders">
        <out-parameters>
            <parameter name="ordersList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderHeader" list="ordersList">
                <order-by field-name=" -placedDate"/>
            </entity-find>
        </actions>
    </service>

    <!-- 4.Finding the Order Header details for a given orderId.-->

    <service verb="get" noun="Order">
        <in-parameters>
            <parameter name="orderId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="ordersList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderHeader" list="ordersList"/>
            <set field="order" from="[]"/>
            <iterate list="ordersList" entry="order">
                <set field="orderId" from="order.orderId"/>
                <set field="orderName" from="order.orderName"/>
                <set field="placedDate" from="order.placedDate"/>
                <set field="statusId" from="order.statusId"/>
                <set field="orderRevision" from="order.orderRevision"/>
                <set field="currencyUomId" from="order.currencyUomId"/>
                <set field="productStoreId" from="order.productStoreId"/>
                <set field="salesChannelEnumId" from="order.salesChannelEnumId"/>
                <set field="grandTotal" from="order.grandTotal"/>
                <set field="orderMap"
                     from="[orderId:orderId,orderName:orderName,placedDate:placedDate,statusId:statusId,orderRevision:
                     orderRevision,currencyUomId:currencyUomId,productStoreId:productStoreId,salesChannelEnumId:salesChannelEnumId
                     ,grandTotal:grandTotal]"/>
                <set field="order" from="order+orderMap"/>
            </iterate>
        </actions>
    </service>

    <!-- 5.Finding all Order Header records with the grandTotal greater than 50.-->

    <service verb="get" noun="OrderHeaders">
        <out-parameters>
            <parameter name="orderHeaderDetails" type="list"/>
        </out-parameters>
        <actions>
            <set field="orderHeaderDetails" from="[]"/>
            <entity-find entity-name="mantle.order.OrderHeader" list="ordersList">
            </entity-find>
            <iterate list="ordersList" entry="order">
                <if condition="order.grandTotal &gt; 50">
                    <then>
                        <set field="orderHeaderDetails" from="[orderId:orderId,orderName:order.orderName,placedDate:order.placedDate,statusId:order.statusId,orderRevision:
                     order.orderRevision,currencyUomId:order.currencyUomId,productStoreId:order.productStoreId,salesChannelEnumId:order.salesChannelEnumId
                     ,grandTotal:order.grandTotal]"/>
                    </then>
                </if>
            </iterate>
        </actions>
    </service>

    <!-- @  6.Listing all Order Item details for the order with orderId, 100102 and orderPartSeqId, 01.-->
    <service verb="get" noun="OrderItems">
        <out-parameters>
            <parameter name="orderItemList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderItem" list="orderItemList">
                <econdition field-name="orderId" value="100102"/>
                <econdition field-name="orderPartSeqId" value="01"/>
            </entity-find>
        </actions>
    </service>

    <!-- @ 8.Find all Order Part records assigned to the facility with ZIRET_WH value-->

    <service verb="get" noun="OrderPartData">
        <in-parameters>
            <parameter name="facilityId" required="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="orderId"/>
            <parameter name="orderPartSeqId"/>
            <parameter name="facilityId"/>
            <parameter name="partName"/>
            <parameter name="customerPartyId"/>
        </out-parameters>
        <actions>
            <entity-find-one entity-name="mantle.order.OrderPart" value-field="order"/>
            <set field="orderId" from="order.orderId"/>
            <set field="orderPartSeqId" from="order.orderPartSeqId"/>
            <set field="statusId" from="order.statusId"/>
            <set field="vendorPartyId" from="order.vendorPartyId"/>
            <set field="customerPartyId" from="order.customerPartyId"/>
            <set field="facilityId" from="order.facilityId"/>
            <set field="carrierPartyId" from="order.carrierPartyId"/>
            <set field="shipmentMethodEnumId" from="order.shipmentMethodEnumId"/>
            <set field="partTotal" from="order.partTotal"/>
            <set field="priority" from="order.priority"/>
            <set field="disableShippingCalc" from="order.disableShippingCalc"/>
            <set field="disableTaxCalc" from="order.disableTaxCalc"/>
        </actions>
    </service>

    <!--  @ 9.Finding the count of order parts for the customer Party Id, “CustJqp”.-->

    <service verb="get" noun="OrderPartsCount">
        <out-parameters>
            <parameter name="orderPartsCount" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderPart" list="orderPartsCount">
                <econdition field-name="customerPartyId" value="CustJqp"/>
            </entity-find>
        </actions>
    </service>

    <!--@10.Finding all unique Order Parts with shipmentMethodEnumId value as “ShtMthGround” and facilityId as “ZIRET_WH”.-->

    <service verb="get" noun="OrderPartsInfo">
        <out-parameters>
            <parameter name="orderPartList" type="list"/>
        </out-parameters>
        <actions>
            <entity-find entity-name="mantle.order.OrderPart" list="orderPartList">
                <econdition field-name="shipmentMethodEnumId" value="ShtMthGround"/>
                <econdition field-name="facilityId" value="ZIRET_WH"/>
            </entity-find>
        </actions>
    </service>
</services>